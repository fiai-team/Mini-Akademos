package uci.fiai.miniakd

import android.os.Bundle
import android.view.View
import androidx.appcompat.app.AppCompatActivity
import kotlinx.android.synthetic.main.activity_fullscreen.*
import android.view.animation.AnimationUtils
import android.R.attr.versionName
import android.content.pm.PackageInfo
import android.content.pm.PackageManager
import androidx.core.app.ComponentActivity
import androidx.core.app.ComponentActivity.ExtraData
import androidx.core.content.ContextCompat.getSystemService
import android.icu.lang.UCharacter.GraphemeClusterBreak.T
import android.view.View.GONE


class FullscreenActivity : AppCompatActivity()/*, OnStateChangeListener*/ {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        setContentView(R.layout.activity_fullscreen)
        supportActionBar?.setDisplayHomeAsUpEnabled(true)

        fullscreenCoordinatorLayout.systemUiVisibility =
            View.SYSTEM_UI_FLAG_LOW_PROFILE or
                    View.SYSTEM_UI_FLAG_FULLSCREEN or
                    View.SYSTEM_UI_FLAG_LAYOUT_STABLE or
                    View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY or
                    View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION or
                    View.SYSTEM_UI_FLAG_HIDE_NAVIGATION

        versionTextView.let {
            try {
                val packageInfo = packageManager.getPackageInfo(packageName, 0)
                it.append(packageInfo.versionName)
            } catch (e: PackageManager.NameNotFoundException) {
                it.visibility = GONE
            }
        }

    }

    override fun onPostCreate(savedInstanceState: Bundle?) {
        super.onPostCreate(savedInstanceState)

        appNameTextView.animation = AnimationUtils.loadAnimation(this, R.anim.fade_in)
    }

    /*override fun onStateChange(state: Int) {
        when (state) {
            State.STROKE_STARTED -> {
                logoImageView.visibility = View.VISIBLE
                Flubber.with().animation(Flubber.AnimationPreset.SLIDE_DOWN)
                    .repeatCount(0).duration(3500)
                    .createFor(logoImageView).start()
            }

            State.FINISHED -> {
                /*startActivity(Intent(this, MainActivity::class.java))
                finish()*/
            }
        }
    }*/

    private val SPLASH = "M 28.00,205.00\n" +
            "           C 28.00,205.00 37.21,236.96 37.21,236.96\n" +
            "             39.73,242.28 46.33,243.79 50.61,239.69\n" +
            "             57.42,233.16 58.95,212.00 66.00,204.00\n" +
            "             66.33,211.27 68.61,220.82 70.37,228.00\n" +
            "             71.07,230.85 72.21,236.67 73.45,238.98\n" +
            "             77.15,245.91 85.43,245.00 87.40,239.94\n" +
            "             89.00,235.82 85.35,225.43 84.15,221.00\n" +
            "             84.15,221.00 79.08,199.00 79.08,199.00\n" +
            "             79.08,199.00 75.08,175.00 75.08,175.00\n" +
            "             73.50,169.52 69.52,164.10 63.04,166.60\n" +
            "             58.19,168.47 57.51,174.58 56.37,179.00\n" +
            "             56.37,179.00 46.00,212.00 46.00,212.00\n" +
            "             42.58,203.95 40.42,189.03 38.60,180.00\n" +
            "             37.78,175.93 36.66,169.31 32.79,167.02\n" +
            "             31.40,166.20 29.59,166.01 28.01,166.13\n" +
            "             20.10,166.68 18.28,177.74 17.00,184.00\n" +
            "             17.00,184.00 11.29,209.00 11.29,209.00\n" +
            "             9.33,215.83 5.70,228.12 6.05,235.00\n" +
            "             6.56,245.11 15.50,243.84 18.57,240.69\n" +
            "             21.31,237.87 22.62,227.33 23.58,223.00\n" +
            "             23.58,223.00 28.00,205.00 28.00,205.00 Z\n" +
            "           M 286.00,220.00\n" +
            "           C 292.22,226.22 304.71,238.71 313.00,241.20\n" +
            "             318.64,242.90 328.28,241.43 325.22,233.10\n" +
            "             323.99,229.75 319.83,228.30 317.00,226.53\n" +
            "             313.38,224.28 306.18,218.02 303.00,214.96\n" +
            "             301.22,213.25 297.04,209.58 297.04,207.00\n" +
            "             297.04,204.39 301.93,200.02 303.72,198.00\n" +
            "             308.03,193.10 320.25,180.42 322.15,175.00\n" +
            "             324.78,167.46 316.85,163.89 311.00,167.60\n" +
            "             311.00,167.60 285.99,194.00 285.99,194.00\n" +
            "             287.04,189.72 288.05,172.66 285.99,169.15\n" +
            "             283.78,165.43 277.47,165.00 274.74,168.31\n" +
            "             272.71,170.77 273.00,174.97 272.96,178.00\n" +
            "             272.96,178.00 272.96,195.00 272.96,195.00\n" +
            "             272.96,195.00 272.00,207.00 272.00,207.00\n" +
            "             272.00,207.00 272.00,233.00 272.00,233.00\n" +
            "             272.00,235.63 271.78,239.50 273.17,241.77\n" +
            "             275.31,245.27 282.37,246.37 284.83,242.69\n" +
            "             286.75,239.80 286.00,224.30 286.00,220.00 Z\n" +
            "           M 339.04,166.74\n" +
            "           C 337.14,167.84 336.36,168.01 335.17,170.11\n" +
            "             333.24,173.55 334.00,189.19 334.06,194.00\n" +
            "             334.06,194.00 334.06,220.00 334.06,220.00\n" +
            "             333.94,224.95 331.87,232.71 334.06,236.94\n" +
            "             337.16,242.43 349.17,244.93 355.00,245.00\n" +
            "             362.45,245.08 368.93,245.46 376.00,242.52\n" +
            "             393.80,235.13 400.43,211.07 390.53,195.00\n" +
            "             383.37,183.37 372.18,177.37 360.00,172.40\n" +
            "             353.09,169.57 346.68,164.93 339.04,166.74 Z\n" +
            "           M 101.15,170.10\n" +
            "           C 92.66,177.55 103.43,185.32 110.77,180.83\n" +
            "             114.67,178.45 114.67,172.55 110.77,170.10\n" +
            "             107.87,168.40 104.13,168.96 101.15,170.10 Z\n" +
            "           M 179.15,170.10\n" +
            "           C 170.66,177.55 181.43,185.32 188.77,180.83\n" +
            "             192.67,178.45 192.67,172.55 188.77,170.10\n" +
            "             185.87,168.40 182.13,168.96 179.15,170.10 Z\n" +
            "           M 243.00,220.00\n" +
            "           C 243.54,225.95 247.36,239.24 254.02,240.67\n" +
            "             259.87,241.92 262.47,237.13 261.67,232.00\n" +
            "             261.67,232.00 257.15,218.00 257.15,218.00\n" +
            "             257.15,218.00 249.80,185.00 249.80,185.00\n" +
            "             248.83,180.17 248.30,171.47 242.96,169.62\n" +
            "             236.96,167.54 232.13,175.91 229.34,180.00\n" +
            "             229.34,180.00 212.05,206.99 212.05,206.99\n" +
            "             212.05,206.99 206.07,214.13 206.07,214.13\n" +
            "             206.07,214.13 203.83,221.09 203.83,221.09\n" +
            "             201.82,225.96 195.70,236.18 202.15,239.98\n" +
            "             213.11,246.44 216.37,226.36 221.39,223.01\n" +
            "             223.97,221.28 239.25,220.08 243.00,220.00 Z\n" +
            "           M 348.00,184.00\n" +
            "           C 357.06,186.56 372.54,193.87 377.52,202.01\n" +
            "             383.48,211.76 380.61,224.36 370.00,229.43\n" +
            "             366.26,231.22 362.04,231.02 358.00,231.00\n" +
            "             355.10,230.99 350.88,231.27 349.02,228.57\n" +
            "             347.53,226.40 348.00,218.86 348.00,216.00\n" +
            "             348.00,216.00 348.00,184.00 348.00,184.00 Z\n" +
            "           M 151.00,203.00\n" +
            "           C 151.00,203.00 151.00,210.00 151.00,210.00\n" +
            "             151.00,210.00 151.00,225.00 151.00,225.00\n" +
            "             151.32,231.91 151.07,244.25 160.98,242.85\n" +
            "             164.43,242.36 166.25,240.44 166.74,237.00\n" +
            "             166.74,237.00 165.00,214.00 165.00,214.00\n" +
            "             164.98,203.62 164.47,189.41 151.00,189.02\n" +
            "             148.59,188.94 145.29,188.94 143.00,189.65\n" +
            "             140.38,190.45 137.39,192.54 135.00,194.00\n" +
            "             132.53,187.01 125.88,186.42 122.60,190.31\n" +
            "             120.71,192.56 121.01,196.23 121.00,199.00\n" +
            "             121.00,199.00 120.00,230.00 120.00,230.00\n" +
            "             120.01,235.06 119.46,241.92 126.02,242.85\n" +
            "             137.20,244.44 133.85,233.92 134.04,228.00\n" +
            "             134.37,217.89 139.76,204.30 151.00,203.00 Z\n" +
            "           M 100.23,190.02\n" +
            "           C 95.86,194.04 97.20,197.60 96.96,203.00\n" +
            "             96.96,203.00 96.04,211.00 96.04,211.00\n" +
            "             96.04,211.00 96.04,228.00 96.04,228.00\n" +
            "             96.01,231.50 95.83,236.68 98.09,239.63\n" +
            "             100.50,242.66 106.69,242.78 109.15,239.63\n" +
            "             111.03,237.31 111.07,232.92 110.96,230.00\n" +
            "             110.96,230.00 110.02,218.00 110.02,218.00\n" +
            "             110.02,218.00 111.00,198.00 111.00,198.00\n" +
            "             110.86,190.64 107.61,187.35 100.23,190.02 Z\n" +
            "           M 178.23,190.02\n" +
            "           C 173.86,194.04 175.20,197.60 174.96,203.00\n" +
            "             174.96,203.00 174.04,211.00 174.04,211.00\n" +
            "             174.04,211.00 174.04,228.00 174.04,228.00\n" +
            "             174.01,231.50 173.83,236.68 176.09,239.63\n" +
            "             178.50,242.66 184.69,242.78 187.15,239.63\n" +
            "             189.03,237.31 189.07,232.92 188.96,230.00\n" +
            "             188.96,230.00 188.02,218.00 188.02,218.00\n" +
            "             188.02,218.00 189.00,198.00 189.00,198.00\n" +
            "             188.86,190.64 185.61,187.35 178.23,190.02 Z\n" +
            "           M 237.00,194.00\n" +
            "           C 237.00,194.00 239.00,208.00 239.00,208.00\n" +
            "             239.00,208.00 228.00,208.00 228.00,208.00\n" +
            "             228.00,208.00 237.00,194.00 237.00,194.00 Z"



    companion object {
        /**
         * Whether or not the system UI should be auto-hidden after
         * [AUTO_HIDE_DELAY_MILLIS] milliseconds.
         */
        private val AUTO_HIDE = true

        /**
         * If [AUTO_HIDE] is set, the number of milliseconds to wait after
         * user interaction before hiding the system UI.
         */
        private val AUTO_HIDE_DELAY_MILLIS = 3000

        /**
         * Some older devices needs a small delay between UI widget updates
         * and a change of the status and navigation bar.
         */
        private val UI_ANIMATION_DELAY = 300
    }
}
